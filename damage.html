<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>mabinogi (マビノギ) ダメージ計算機</title>
		<link rel="stylesheet" type="text/css" href="damage-style.css" media="screen,tv,projection" title="site"/>
		<link rel="meta" type="application/rdf+xml" title="FOAF" href="http://lowreal.net/cho45/foaf"/>

		<link rev="made" href="mailto:cho45@lowreal.net"/>

		<script type="text/javascript" src="/lib/jquery-1.2.6.min.js"></script>
		<script type="text/javascript" src="http://gist.github.com/3239.txt"></script>
		<script type="text/javascript" src="damage-script.js"></script>
	</head>
	<body>
		<div id="whole">
			<h1 id="top"><a href="">mabinogi ダメージ計算機</a></h1>

			<div id="content">
				<div id="calc" class="calc">
					<textarea id="calc-template" class="template">
						<fieldset>
							<legend>入力</legend>
							<dl class="input">
								<dt>ダメージ</dt>
								<dd>
								<input type="text" size="4" value="0" class="min"/>
								~
								<input type="text" size="4" value="100" class="max"/>
								</dd>
								<dt>クリティカル</dt>
								<dd>
								<input type="text" size="4" value="30" class="critical"/> %
								(Rank: <input type="text" size="2" value="7" class="criticalrank"/>)
								</dd>
								<dt>バランス</dt>
								<dd>
								<input type="text" size="4" value="80" class="balance"/>
								</dd>
							</dl>
						</fieldset>
						<dl class="output">
							<dt>ダメージ期待値</dt>
							<dd class="expectation"></dd>
							<dt>ダメージ期待値(クリティカル含)</dt>
							<dd class="criticalexpectation"></dd>
						</dl>
					</textarea>
				</div>

				<div class="desc">
					<h2>備考</h2>
					<div class="section">
						<h3>基本</h3>
						<ul>
							<li>Dex(弓): +2.5ごとに最大ダメージ+1、+3.5ごとに最小ダメージ+1</li>
							<li>Str(近接): +2.5ごとに最大ダメージ+1、+3ごとに最小ダメージ+1</li>
						</ul>

						<p>
							ダメージ期待値は最小・最大への丸めこみのせいで場合わけなしに求めることができない。
							(<a href="http://ja.wikipedia.org/wiki/%E6%9C%9F%E5%BE%85%E5%80%A4">期待値</a>は各ダメージ数値にそのダメージの出現確率をかけて足したもの)
						</p>

						<!--
						<p>memo</p>

						<ol>
							<li>
								正規分布確率密度関数
								<img src="data:image/gif;base64,R0lGODdhyAAnAPMAAP///9XV1crKyr+/v7W1tampqZ6enpKSkm5ubmFhYVRUVEZGRgAAAAAAAAAAAAAAACH5BAEAAAAALAAAAADIACcAAAT/EMhJq7046827/1XAgGTZMYGprmzrSmL6zlxM33j+CYyg0yIGasLz/Y7IGwKRdDEGgMFosmxaryApFGuaArzRJ3dMpjJLouPwAgZUy3CrFr3W2Sq8yjzO/71JPUl5FHcUf32IL3sgg0mBMI96YokqUpQJCl1GglM8BQRtEgoJlF0MpIlCXRVCCUKhG2kAshNTp69ssKUnlKolYHm2gEaREroWvruAiQMLqMu1KW2v1NQTNoXGHgkLW8ofx1zc3iCw4Rk2UpvaHc3P37yIydCsJupuCetf4OchunVY+lmZV46YAB4KCgikwC3MAWALv+gKImMWQEIXm0REQnDHlCAE/xBk3KBggRApYIpt6GhswKBsFmA6SrWRlT4TjSzk5MByp8oLO2fKq4mxooqgkIzyNLdOZsyROVqx5DLVAy0VUKFmYNkGKZub8G5UDbtyGgOTXoqJQABKiAyvu4KskWoM1xe2ryqOJbvVXL1rDAooCNTIbLVqrA4rXszYmkUflmoRABB0sA8eMvb2bcy5s2cMHX1SGDLpL9nAtTAKiDza2yDNfJGFUhnKKdExrhwTSZAP2d+pjfkShFl75G1Tnh2HE8D75jQJ4xLJVfrBnT+lTC2OThwc5/GfkA5eLD3Ieo7pJ6CwJhGdQtBHPRBSrgNXrA/0HURc9iJlMgBQ5Liyn/9ex60EBWY8pWYKMje9JERIbo0GFg42iIFgfnnV5YoxudWiUIS1FKiBF/X5tmBRT1GXYhOvESFighhgokNKHqkwynVfcVDiDPBtp0YGi+jQiFwdAqYiB4v0sB6K6Gj1AZHDZVTYLbm9WJoFh0RlhH7sADYhB4dQ1OSRTpHA5T617JfjfPu8yOExQd5Q2CYQfUJUnBiCduQwCkpQxU9zWuKmB1nOcCaabNZSZQmF9uIiBYIqdagxPgzazpUvVNglePZgWkpa6/BgQBuaJoVoE42u4Ak7YizJQqqpqBcKAr25WECXLV5RBA232IWfC7uG9eujo1WZVmZclCmsk7E1C4kFs9FcEAEAOwAAAAAAAAAAAA==" alt="f(x)=\frac{1}{\sigma\sqrt{2\pi}} \exp\left(-\frac{(x-\mu)^2}{2\sigma^2} \right)"/>
							</li>
							<li>
								平均
								<img src="data:image/gif;base64,R0lGODdhOAETAPMAAP///9XV1crKyr+/v7W1tampqZ6enpKSkm5ubmFhYVRUVEZGRjg4OCgoKBgYGAAAACH5BAEAAAAALAAAAAA4ARMAAAT/EMhJq70YhJe7/2AoUk+Qcdg2rmxroa5UxnRtV5t57zaczhcfJcd7CHkhwZFFRIKWzlBT9lAYLRuFFYo0brHVr2gKMBYeZx/ZuzUiBCJuNAiXDNRGoGRj1JFXXlc4YYJzMQ91FAULDkIbBwwKA4YWi42DkJIsShUDCg2aJIkUkZMSCwlJcpR7QEaprXBKfogAsxKcJx6Wjg+ZpqxMehMPBgxCaAoLwMFlxsgFysxjw56gzH8ACcskq8SjzRW5xN8TubW4KNnkHcXHFcnc4SvjEyqFthz4wfc+nPsj0JVBQxBGPWI+Brz7sG6eQBns2CErh0FOPwr/vMUhUeNhq4Gi/0C2MkKgF4KSfVZcLFcoJUIBSvAdLPMCnAwGEwZsg8HnQckhenr+pAIzDxiX6ZC20hFxIk2O6XRlWCkDTsthRooCNGfwSJ6vYOFd4LTNFKcBqIhN0okAaLRaMz2QlXc2bb4zXA8kqOUUql8KaBd8XQBvbYK2XEkYRqxEL99BsmBYgTM0sViIUPs+DdJhrlkOaGEpwZvOsdUTiTyyWFIrdFVtdFEoYTbjwbSAcFyXgVO26h1iBBIkqKNZaoVtgIXXyTU7ZNR8pnwqx7zUwu98TF9f3oxZMxc5re3W6r37epngw6kPopW9xZEmV87BQJctG9iw9lxxkA8PnO2I6hnXTf8n4tWxhnNrAOODagAg0EZ79gH4lHcIDYZfdSDx55xaEuang3mHgKHDAwycMeJ8OS3REEOulKgfRr3ocJBGrAmhGwwgcocjHjIuWFFnrEmIAoU//jCiiyfCuN5z1qGDQAKVUXHfV9tZVkYDQOi22ZNRvqbCCOM8gOWHdskwwDhhnoniB0doaYs01HEpm09DTiAnk7adU2RFNm0m0DmJ1PNdBmGOaUeZZahpZZ5HPLmWLwzGMcodBRDDgCme4MThHQegg4gSCmA3AqWWYqqApsSckVpqqjLZzqSnJifYppASZ4Cnj3ZKHKu44vkZUO1Rt0FktBBr5QsYkHqTqajK0KqmdmU8y1Uatm0F5nwP7DXktloI0tMdPJGEgFJsZivIuYSE62N+8/VpQZjp5oEANnmAyy671a45Er5BfZXdTK94m0d2PWUXKXcIaUsFFd2q+xcfYESx4jwUiwjCxBV35C4NK2oUTFw9bJzxyCDTMbLEw+xQMsInH8xxyiePjDGwMfOwsgsz1xwgEjnr7ETPHvqs8c8wC53xl0aHUzSLSbvgcUDBNi1BBAA7AAAAAAAAAAAA" alt="\mu = (Max - Min) * (Balance / 100) + Min"/>
							</li>
							<li>
								分散
								<img src="data:image/gif;base64,R0lGODdh0AAXAPMAAP///9XV1crKyr+/v7W1tampqZ6enpKSkm5ubmFhYVRUVEZGRjg4OCgoKBgYGAAAACH5BAEAAAAALAAAAADQABcAAAT/EMhJq7046827/2AojlzwnAGprmzrvvD3DIDwpHGu73wvPhPbxoTyGY/IpAU4YWZmtZvy6LSYpliNFCPUBqvZHHhiwoV3Y0wZ8xBsqmkQcWs90QFzhBtvf+ibNF0SJwUPhVVrTQ8KJ3UKjHExJ5COlCKJFIIdmpdtUWZknjY4Jm4DCQiDNBILCRMKDIygAAMKDQqrTXsUBQsOYCYHsblGvb8VwcMqnKUgnirPUUu7XQ8EEwNMcE6wCbvYtrgUmE0GDGCGCgvERg/m6AXq7CGYa5EVnD8VY+gSCAmr8gFQ4GoQG0MIneS70ugLgIZIGFYRAhHaHhsFDPI5kaBisxX9//aJrJGgFYE7ErLtuvdwWp2HcNxAnHMSmZ+TReQAqegJYs5BbWxUdPiwox0+e4BJQden6dCQFKASWNBgwbWoDxJclWAUpcaoF4SUDAhkQCtAtFCNSyeKpQWx6yQIMVsQo8IHBzrKZKOGzkRDX0dAbTLSBIGS3iqcSqxRZYc0nugOcjNWLhMbxJbOk2Hq7EPKcT9na3KYcZzT3+B0desF7EjCn1OqVey5AsHHdXA0qubkGTkJv2E69bhltzZ03x7mOs2XqI7BgVtKTwm5Om6buhkU0t0bW5rgHhI90F78L3bLzZeEmqVleJ991PjFn0y0oeTp99+87d1gS34n/9QEH58fIQjyQH845KecIAYOkM9pgXgFQzOjAAVcW6RgOEhGiyVFQ4ePfZNNRoMwsEotDET1IV7PBLXIJyCM2ISJKcGyTyErrYQjPnHMwV4OPioSyk8b0ZHHLkd6YGBWDTW5iCVzZOMEEQQgQCQHHDkJ1CMz8bSWfGeE2cmPYmYBXploupRmmAKt6SYfZL7Zw5lypklnnTHciWeZV+zpg4QURAAAOwAAAAAAAAAAAA==" alt="\sigma^2 = 0.0835 * (Max - Min)^2"/>
							</li>

						</ol>
						-->
					</div>

					<div class="section">
						<h3>弓 Dex ダメージ早見表</h3>
						<ul>
							<li>Dex+3: Max+1.2 Min+0.86 (コボルドES・アーチャーES(弱))</li>
							<li>Dex+5: Max+2 Min+1.43 (細心ES単発)</li>
							<li>Dex+10: Max+4 Min+2.86 (細心ESエルフフル・リボルバーES)</li>
							<li>Dex+15: Max+6 Min+4.26 (細心ES人間フル)</li>
							<li>Dex+20: Max+8 Min+5.71 (サキュ誘惑)</li>
						</ul>
						<p>レンマス(笑)</p>
					</div>

					<div class="section">
						<h3>まともに使えそうな Dex エンチャ一覧</h3>
						<p>Mabinogi Wiki の Dex 特化のところのエンチャ一覧はデメリットが書いてないのでめんどくさい……</p>
						<p>すべて suffix</p>
						<ul>
							<li>コボルド: Dex+3</li>
							<li>風の: Dex+2~3 (コボルドより安ければアクセにつけてもいい、というレベル)</li>
							<li>アーチャー(弱): 最小+5 Dex+3 (産出時点で最小+5がついてるならそのまま使ったほうが良い)</li>
							<li>サンザシ: Dex+3 Str+3 Int+3 (コボルドつけるぐらいならこれのほうがいいけど高価)</li>
							<li>紡織: Dex+2 Dex+4 (夜明けのサンダルあたりを上書きするのが現実的)</li>
							<li>刺繍の: Dex+3 MHP-10 (HP減らしつつ Dex 増やす服に)</li>
							<li>必中の: Dex+4 Dex+5 (抽出せずそのまま使うが吉・ターバンは頭装備 Dex+8)</li>
						</ul>
						<p>トゲ(笑)</p>
					</div>

					<div class="section">
						<h3>弓ダメージ 考察</h3>
						<p>近接スイッチは考慮しない。バランスは80前提</p>
						<ul>
							<li>服のエンチャは FH を頑張って貼るぐらいなら細心をはったほうがよい。ただし +10 以上の条件を満す必要がある。</li>
							<li>Dex+10 いかない prefix Dexエンチャはゴミ</li>
							<li>suffix は基本的にろくなエンチャがない</li>
							<li>最小ダメージをあげてもダメージ期待値のあがりは悪い。バランスが高いと最小値以下の値が殆ど発生しないため。
								<ul>
									<li>80-150: 133.77 (基本)</li>
									<li>85-150: 135.06 (最小+5)</li>
									<li>85-151: 135.81 (アーチャー/Dex+3 Min+5)</li>
								</ul>
							</li>
							<li>
								鋼玉は以下の例ぐらいのときで探検レベル18以下のときでも FH より若干有利だが、コストパフォーマンス最悪。
								<ul>
									<li>80-150: 133.77 (基本)</li>
									<li>80-154: 136.79 (フォックスハンター) +3</li>
									<li>75-156: 137.02 (鋼玉探検レベル18以下) +4</li>
									<li>80-156: 138.30 (鋼玉探検レベル19以上) +5</li>
								</ul>
								<ul>
									<li>90-170: 151.44 (基本)</li>
									<li>90-174: 154.46 (フォックスハンター) +3</li>
									<li>85-176: 154.69 (鋼玉探検レベル18以下) +3</li>
									<li>90-176: 155.97 (鋼玉探検レベル19以上) +5</li>
								</ul>
								<ul>
									<li>100-200: 176.66 (基本)</li>
									<li>100-204: 179.69 (フォックスハンター) +3</li>
									<li> 95-206: 179.92 (鋼玉探検レベル18以下) +3</li>
									<li>100-206: 181.20 (鋼玉探検レベル19以上) +5</li>
								</ul>
							</li>
						</ul>

						<h3>クリを捨てたダメージ特化装備 現実的なもの</h3>
						<ol>
							<li>石英 コボルト アクセサリ * 2 (Max+6 * 2)</li>
							<li>鋼玉 必中の レイヤードビンテージターバン (Max+9)</li>
							<li>勝利の 紡織 服 (Max+8 Min+2)</li>
							<li>冷酷な アーチャー セモサイドグローブ (Max+6 Min+5)</li>
							<li>鋼玉 紡織 サンダル (Max+8 Min+2)</li>
							<li>(鋼玉 レイブン リングボウ)</li>
						</ol>
						<p>サンダルとターバンに合う服を選ぶ必要がある。耐久低いけどピンエプが店売りでいいかな?</p>
						<p>クリを遺す場合 HP 低下効果も含め基本的に suffix は盗賊一択。ちなみにクリ捨てる場合相手の攻撃力も高いことが多いのであんまり HP 低下させなくてもデッドリになる。</p>
					</div>
				</div>
			</div>

			<div id="footer">
				<div class="memo">
					<p>式一覧</p>
					<ul>
						<li>魔法 int ダメージボーナス: log10(Int)^3 * 2</li>
						<li>最小負傷率: floor((Will + Dex - 20) / 20) + 武器 + エンチャント</li>
						<li>最大負傷率: floor((Will - 20) / 5) + floor((Dex - 20) / 10) + 武器 + エンチャント</li>
						<li>クリティカル率: (Will - 10) / 10 + (Luck - 10) / 5 + 武器 + エンチャント</li>
						<li>バランス: (Dex - 10) / 4 + 武器 + エンチャント</li>
					</ul>
				</div>

				<address>2008 <a href="mailto:cho45@lowreal.net">cho45@lowreal.net</a></address>
			</div>
		</div>
	</body>
</html>
